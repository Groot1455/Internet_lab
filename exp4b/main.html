<!DOCTYPE html>
<html>
<head>
<title>Hit Count Example</title>
<style>
body {
  font-family: Arial;
  background-color: #f0f0f0;
}
.box {
  width: 550px;
  margin: auto;
  background: white;
  padding: 20px;
  border-radius: 6px;
}
</style>

<script>
function getSessionId() {
  let sid = sessionStorage.getItem("SESSION_ID");
  if (!sid) {
    sid = "SID-" + Math.random().toString(36).substring(2, 10);
    sessionStorage.setItem("SESSION_ID", sid);
  }
  return sid;
}

function hitCounter() {
  // SESSION ID
  const sessionId = getSessionId();

  // CREATION TIME
  let creationTime = sessionStorage.getItem("CREATION_TIME");
  if (!creationTime) {
    creationTime = new Date().toString();
    sessionStorage.setItem("CREATION_TIME", creationTime);
  }

  // LAST ACCESS TIME
  const lastAccess = new Date().toString();
  sessionStorage.setItem("LAST_ACCESS", lastAccess);

  // HIT COUNT
  let hitCount = sessionStorage.getItem("HIT_COUNT");
  if (!hitCount) {
    hitCount = 1;
  } else {
    hitCount = parseInt(hitCount) + 1;
  }
  sessionStorage.setItem("HIT_COUNT", hitCount);

  // DISPLAY (SERVLET-LIKE OUTPUT)
  document.getElementById("out").innerHTML =
    "Your Session ID: " + sessionId +
    "<br>Session Creation Time: " + creationTime +
    "<br>Time of Last Access: " + lastAccess +
    "<br>Latest Hit Count: " + hitCount;
}
</script>
</head>

<body>

<div class="box">
  <h3>Hit Count Example with HttpSession (Simulated)</h3>

  <form onsubmit="event.preventDefault(); hitCounter();">
    Click for Hit Count
    <input type="submit" value="GET HITS">
  </form>

  <br>
  <div id="out"></div>
</div>

</body>
</html>
